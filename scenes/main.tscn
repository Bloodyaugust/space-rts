[gd_scene load_steps=18 format=2]

[ext_resource path="res://behaviors/generate_map.tscn" type="PackedScene" id=1]
[ext_resource path="res://resources/themes/kenney/kenney.tres" type="Theme" id=2]
[ext_resource path="res://resources/themes/kenney/panel_texture.tres" type="StyleBox" id=3]
[ext_resource path="res://sprites/buildings/spaceBuilding_024.png" type="Texture" id=4]
[ext_resource path="res://resources/themes/kenney/Spritesheet/UIpackSheet_transparent.png" type="Texture" id=5]
[ext_resource path="res://actors/Buildings/refinery.tscn" type="PackedScene" id=6]
[ext_resource path="res://actors/Buildings/mining-drone-factory.tscn" type="PackedScene" id=7]
[ext_resource path="res://actors/Drones/transport-drone.tscn" type="PackedScene" id=8]

[sub_resource type="GDScript" id=1]
script/source = "extends Camera2D

export var camera_move_speed : float

func _physics_process(delta):
  if Input.is_action_pressed(\"ui_right\"):
    translate(Vector2(1, 0) * camera_move_speed * delta)
  if Input.is_action_pressed(\"ui_left\"):
    translate(Vector2(-1, 0) * camera_move_speed * delta)
  if Input.is_action_pressed(\"ui_down\"):
    translate(Vector2(0, 1) * camera_move_speed * delta)
  if Input.is_action_pressed(\"ui_up\"):
    translate(Vector2(0, -1) * camera_move_speed * delta)"

[sub_resource type="Shader" id=2]
code = "shader_type canvas_item;
render_mode blend_mix;

uniform float star_threshold : hint_range(0, 1);
uniform vec4 star_color : hint_color;
uniform vec4 background_color : hint_color;

void fragment() {
  COLOR = texture(TEXTURE, UV);
  
  if (distance(COLOR, star_color) < star_threshold) {
    COLOR = star_color;
  } else {
    COLOR = background_color
  }
}"

[sub_resource type="ShaderMaterial" id=3]
shader = SubResource( 2 )
shader_param/star_threshold = 0.469
shader_param/star_color = Color( 1, 1, 1, 1 )
shader_param/background_color = null

[sub_resource type="OpenSimplexNoise" id=4]
seed = 100
period = 7.0
persistence = 0.384
lacunarity = 2.54

[sub_resource type="NoiseTexture" id=5]
flags = 64
width = 1920
height = 1080
seamless = true
noise = SubResource( 4 )

[sub_resource type="GDScript" id=6]
script/source = "extends TextEdit

onready var map_generator: Node = $\"../../generate_map\"

func _ready():
  map_generator.connect(\"map_generated\", self, \"on_map_generated\")
  
  on_map_generated()

func on_map_generated():
  text = str(map_generator.get_noise_seed())"

[sub_resource type="AtlasTexture" id=10]
atlas = ExtResource( 5 )
region = Rect2( 433, 451, 14, 14 )

[sub_resource type="OpenSimplexNoise" id=8]
octaves = 1
period = 5.0
persistence = 0.0
lacunarity = 0.1

[sub_resource type="NoiseTexture" id=9]
width = 25
height = 25
noise = SubResource( 8 )

[node name="Node2D" type="Node2D"]

[node name="generate_map" parent="." instance=ExtResource( 1 )]
seed_id = 458373585

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2( 893.261, 537.812 )
current = true
process_mode = 0
drag_margin_left = 0.0
drag_margin_top = 0.0
drag_margin_right = 0.0
drag_margin_bottom = 0.0
script = SubResource( 1 )
camera_move_speed = 500.0

[node name="ParallaxBackground" type="ParallaxBackground" parent="."]

[node name="ParallaxLayer" type="ParallaxLayer" parent="ParallaxBackground"]
motion_scale = Vector2( 0.1, 0.1 )
motion_mirroring = Vector2( 1920, 1080 )

[node name="Sprite" type="Sprite" parent="ParallaxBackground/ParallaxLayer"]
material = SubResource( 3 )
texture = SubResource( 5 )
centered = false

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Button" type="Button" parent="CanvasLayer"]
margin_right = 178.638
margin_bottom = 42.7363
theme = ExtResource( 2 )
text = "Regenerate Map"

[node name="TextEdit" type="TextEdit" parent="CanvasLayer"]
margin_top = 50.0
margin_right = 180.0
margin_bottom = 90.0
theme = ExtResource( 2 )
text = "this is text"
readonly = true
script = SubResource( 6 )

[node name="MarginContainer" type="MarginContainer" parent="CanvasLayer"]
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 600.0
margin_top = -256.0
margin_right = -600.0
grow_horizontal = 2
rect_min_size = Vector2( 720, 256 )
theme = ExtResource( 2 )
custom_constants/margin_right = 20
custom_constants/margin_top = 20
custom_constants/margin_left = 20
custom_constants/margin_bottom = 20

[node name="PanelContainer" type="PanelContainer" parent="CanvasLayer/MarginContainer"]
margin_left = 20.0
margin_top = 20.0
margin_right = 813.0
margin_bottom = 236.0
custom_styles/panel = ExtResource( 3 )

[node name="HBoxContainer" type="HBoxContainer" parent="CanvasLayer/MarginContainer/PanelContainer"]
margin_left = 8.33924
margin_top = 8.33924
margin_right = 785.124
margin_bottom = 208.587
custom_constants/separation = 20
alignment = 1

[node name="VBoxContainer3" type="VBoxContainer" parent="CanvasLayer/MarginContainer/PanelContainer/HBoxContainer"]
margin_left = 9.0
margin_right = 174.0
margin_bottom = 200.0
alignment = 1

[node name="TextureRect" type="TextureRect" parent="CanvasLayer/MarginContainer/PanelContainer/HBoxContainer/VBoxContainer3"]
margin_top = 67.0
margin_right = 165.0
margin_bottom = 133.0
texture = ExtResource( 4 )

[node name="VBoxContainer" type="VBoxContainer" parent="CanvasLayer/MarginContainer/PanelContainer/HBoxContainer"]
editor/display_folded = true
margin_left = 194.0
margin_right = 470.0
margin_bottom = 200.0

[node name="HBoxContainer" type="HBoxContainer" parent="CanvasLayer/MarginContainer/PanelContainer/HBoxContainer/VBoxContainer"]
margin_right = 276.0
margin_bottom = 24.0

[node name="TextureRect" type="TextureRect" parent="CanvasLayer/MarginContainer/PanelContainer/HBoxContainer/VBoxContainer/HBoxContainer"]
margin_right = 50.0
margin_bottom = 24.0
rect_min_size = Vector2( 50, 0 )
texture = SubResource( 10 )
stretch_mode = 1

[node name="Label" type="Label" parent="CanvasLayer/MarginContainer/PanelContainer/HBoxContainer/VBoxContainer/HBoxContainer"]
margin_left = 54.0
margin_right = 276.0
margin_bottom = 24.0
text = "Penis butthole surfer"

[node name="VBoxContainer2" type="VBoxContainer" parent="CanvasLayer/MarginContainer/PanelContainer/HBoxContainer"]
editor/display_folded = true
margin_left = 490.0
margin_right = 766.0
margin_bottom = 200.0

[node name="HBoxContainer" type="HBoxContainer" parent="CanvasLayer/MarginContainer/PanelContainer/HBoxContainer/VBoxContainer2"]
margin_right = 276.0
margin_bottom = 24.0

[node name="TextureRect" type="TextureRect" parent="CanvasLayer/MarginContainer/PanelContainer/HBoxContainer/VBoxContainer2/HBoxContainer"]
margin_right = 50.0
margin_bottom = 24.0
rect_min_size = Vector2( 50, 0 )
texture = SubResource( 10 )
stretch_mode = 1

[node name="Label" type="Label" parent="CanvasLayer/MarginContainer/PanelContainer/HBoxContainer/VBoxContainer2/HBoxContainer"]
margin_left = 54.0
margin_right = 276.0
margin_bottom = 24.0
text = "Penis butthole surfer"

[node name="NoiseExperiment" type="Sprite" parent="."]
visible = false
position = Vector2( 22.6642, 58.6946 )
texture = SubResource( 9 )

[node name="Refinery" parent="." instance=ExtResource( 6 )]
position = Vector2( 584, 432 )

[node name="MiningDroneFactory" parent="." instance=ExtResource( 7 )]
position = Vector2( 771.753, 628.557 )

[node name="TransportDrone" parent="." instance=ExtResource( 8 )]
position = Vector2( 293.93, 422.053 )
[connection signal="pressed" from="CanvasLayer/Button" to="generate_map" method="generate_map"]
